!function(a,b){function c(b,c){this.element=b,this.options=a.extend({},e,c),this.init()}var d="GScroll",e={width:"300px",height:"300px"};c.prototype={init:function(){var b=this;b.node=a(b.element),b.node.wrap('<div class="GScroll" style="width:'+b.options.width+";height:"+b.options.height+'"></div>').wrap('<div class="GScroll-scrollable"></div>').parent().after('<div class="GScroll-bar"></div>'),b.container=b.node.parent().parent(),b.scrollable=b.node.parent(),b.bar=b.node.parent().next(),b.adjust.call(b),b.events.call(b)},adjust:function(){var b=this;if(b.conHeight=b.container.height(),b.scrollHeight=0,b.node.is(":not(:visible)")){var c=b.node.clone();c.css({width:b.options.width,visibility:"hidden"}).removeAttr("id").show(),a("body").append(c),b.scrollHeight=c.outerHeight(),c.remove()}else b.scrollHeight=b.scrollable.height();b.barHeight=Math.max(10,b.conHeight-Math.abs(b.conHeight-b.scrollHeight)),b.bar.css("height",b.barHeight+"px")},events:function(){var c=this;c.dragActive=!1,c.y=0,c.container.on({"DOMMouseScroll mousewheel":function(a){var b=a.originalEvent,d=b.detail<0||b.wheelDelta>0?1:-1;c.wheel.call(c,d)},mouseenter:function(){c.scrollHeight>c.conHeight&&c.bar.stop(!0,!0).fadeIn()},mouseleave:function(){c.bar.stop(!0,!0).fadeOut(),c.dragActive=!1},mousemove:function(a){a.preventDefault(),c.drag.call(c,a)},mouseup:function(){c.dragActive=!1}}),c.bar.on({mousedown:function(a){a.preventDefault(),c.dragActive=!0,c.y=a.pageY},mouseup:function(){c.dragActive=!1},mousemove:function(a){a.preventDefault(),c.drag.call(c,a)}}),c.node.on("adjust."+d,function(){c.adjust.call(c),c.onResize.call(c)}).on("destroy."+d,function(){c.node.unwrap().next().remove().end().unwrap(),a.removeData(c.element),c.node.off(d)}),a(b).on("adjust."+d,function(){c.adjust.call(c),c.onResize.call(c)})},wheel:function(a){var b=this,c=b.conHeight-b.barHeight,d=b.conHeight-b.scrollHeight,e=c/Math.abs(d)*10;a>0?(b.bar.css({top:Math.max(0,parseFloat(b.bar.position().top)-e)},100),b.scrollable.css({top:Math.min(0,parseFloat(b.scrollable.position().top)+10)},100)):0>a&&(b.bar.css({top:Math.min(c,parseFloat(b.bar.position().top)+e)},100),b.scrollable.css({top:Math.max(d,parseFloat(b.scrollable.position().top)-10)},100))},drag:function(a){var b=this,c=b.conHeight-b.barHeight,d=b.conHeight-b.scrollHeight;if(b.dragActive===!0){var e=parseFloat(b.bar.position().top)+a.pageY-b.y;e=Math.min(e,c),b.bar.css({top:Math.max(0,e)+"px"}),b.scrollable.css({top:Math.min(0,Math.max(d,d/c*e))}),b.y=a.pageY}},onResize:function(){var a=this,b=Math.abs(parseFloat(a.scrollable.css("top"))),c=parseFloat(a.bar.css("top")),d=Math.abs(a.conHeight-a.scrollHeight),e=a.conHeight-a.barHeight,f=d/e*c;a.scrollHeight<a.conHeight&&a.bar.hide(),b>d&&a.scrollable.css({top:-d});var g=f/c,h=(f-b)/g;a.bar.css({top:Math.min(e,Math.max(0,c-h))})}},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);